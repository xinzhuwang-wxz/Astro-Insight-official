# 天文数据分析系统演示

本目录包含了完整的天文数据分析系统的演示程序，展示了Planner、Coder、Explainer三个模块的集成使用。

## 📁 演示文件说明

### 1. `complete_astro_system_demo.py` - 完整系统演示
**功能最全面的演示程序**

- **完整Pipeline演示** - 一键运行Planner→Coder→Explainer
- **交互式Planner演示** - 体验多轮对话需求规划
- **分步演示** - 详细展示每个模块的工作过程
- **交互模式** - 支持自定义输入和多种演示模式

**特点：**
- 详细的步骤展示和状态信息
- 完整的错误处理和异常捕获
- 美观的输出格式和进度显示
- 支持预设示例和自定义输入

**使用方法：**
```bash
python complete_astro_system_demo.py
```

### 2. `simple_three_module_demo.py` - 简化演示
**简洁的三模块集成演示**

- **三模块分步演示** - 逐步展示每个模块
- **简化Pipeline演示** - 使用Planner的一键功能

**特点：**
- 代码简洁，易于理解
- 快速展示核心功能
- 适合学习和调试

**使用方法：**
```bash
python simple_three_module_demo.py
```

### 3. `interactive_coder_demo.py` - 原有Coder演示
**原有的Coder模块演示**

- 展示Coder模块的独立使用
- 支持交互式和分步演示
- 详细的代码生成和执行过程展示

## 🚀 快速开始

### 环境准备
1. 确保已安装所有依赖
2. 确保数据集文件在`dataset/`目录下
3. 确保LLM配置正确

### 运行演示

#### 方式1：完整系统演示（推荐）
```bash
python complete_astro_system_demo.py
```

选择演示模式：
- `1` - 交互模式（自定义输入）
- `2` - 演示模式（预设示例）

#### 方式2：简化演示
```bash
python simple_three_module_demo.py
```

选择演示模式：
- `1` - 三模块分步演示
- `2` - 简化Pipeline演示

#### 方式3：原有Coder演示
```bash
python interactive_coder_demo.py
```

## 📋 演示内容

### Planner模块演示
- **多轮对话** - 与用户进行交互式需求收集
- **任务分解** - 将需求分解为具体的编程步骤
- **数据集选择** - 智能推荐最合适的数据集
- **需求确认** - 用户确认最终的分析计划

### Coder模块演示
- **代码生成** - 根据需求生成Python分析代码
- **代码执行** - 执行生成的代码并处理错误
- **结果输出** - 生成图表和数据分析结果
- **错误恢复** - 自动修复代码中的问题

### Explainer模块演示
- **图片分析** - 使用VLM分析生成的图表
- **结果解释** - 提供详细的分析解释
- **洞察提取** - 提取关键发现和建议
- **报告生成** - 生成格式化的分析报告

## 🎯 示例需求

### 星系数据分析
```
"分析星系数据，生成散点图展示星系的大小和亮度关系"
```

### 恒星分类分析
```
"分析恒星分类数据，生成饼图展示恒星类型分布"
```

### SDSS数据分析
```
"分析SDSS数据集，进行相关性分析和可视化"
```

## 📊 输出结果

### 生成的文件
- 数据可视化图表（PNG格式）
- 分析报告（Markdown格式）
- 对话记录（JSON格式）

### 输出目录
```
output/
├── dialogues/           # 对话记录
├── explanation_reports/ # 解释报告
└── *.png               # 生成的图表
```

## 🔧 配置选项

### 演示模式配置
- **交互模式** - 支持自定义输入和实时交互
- **演示模式** - 运行预设的示例需求
- **分步模式** - 详细展示每个处理步骤

### 系统配置
- **数据集目录** - 默认`dataset/`
- **输出目录** - 默认`output/`
- **LLM配置** - 通过环境变量配置

## 🐛 故障排除

### 常见问题

1. **数据集未找到**
   ```
   错误: 未发现可用数据集
   解决: 检查dataset/目录下是否有CSV文件
   ```

2. **LLM调用失败**
   ```
   错误: LLM调用失败
   解决: 检查LLM配置和环境变量
   ```

3. **代码执行错误**
   ```
   错误: 代码执行失败
   解决: 检查Python环境和依赖包
   ```

### 调试模式
```bash
# 启用详细日志
export PYTHONPATH=.
python -v complete_astro_system_demo.py
```

## 📈 性能指标

### 典型处理时间
- **Planner**: 2-5秒（需求规划）
- **Coder**: 5-15秒（代码生成和执行）
- **Explainer**: 10-30秒（图片分析和解释）

### 资源使用
- **内存**: 通常 < 1GB
- **CPU**: 单核处理
- **存储**: 输出文件通常 < 10MB

## 🤝 贡献

欢迎贡献新的演示示例和改进建议！

### 添加新的演示示例
1. 在相应的demo文件中添加新的示例需求
2. 测试确保示例能正常运行
3. 更新README文档

### 报告问题
如果遇到问题，请提供：
- 错误信息
- 使用的演示程序
- 输入的需求内容
- 系统环境信息

## 📄 许可证

MIT License - 详见LICENSE文件
